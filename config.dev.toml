[indexing]
workspace_paths = ["./test-workspace"]
# workspace_paths = ["./crates/indexing/src/pipeline.rs"]
personal_paths = ["./test-notes"]
system_paths = []
watch_enabled = true
batch_size= 16
enable_qa_metadata = false  # ← Enable this for better retrieval (slower)

[embedding]
ollama_host= "http://localhost"
ollama_port= 11434
# dense_model= "jeffh/intfloat-e5-base-v2:f32" # too much for lenovo T14
# dense_model= "nomic-embed-text"
dense_model= "all-minilm:l6-v2"
# vector_size = 768
vector_size = 384

[indexing.filters]
respect_gitignore = true
include_hidden = false
ignore_dirs = ["target", "node_modules", ".git"]
ignore_extensions = ["lock", "log"]
max_file_size = 10485760

[storage]
qdrant_url = "http://localhost:16334"      # Test Qdrant
postgres_url = "postgresql://test_user:test_pass@localhost:15432/ai_agent_test"
redis_url = "redis://localhost:16379"       # Test Redis

[rag]
max_results = 5
query_enhancement_model = "qwen2.5:3b"
classification_model = "phi3:mini"

[rag.reranking_weights]
conversation_boost = 1.2
recency_boost = 1.1
dependency_boost = 0.8

[rag.web_crawler]
enabled = true
max_urls_per_query = 3
request_timeout_secs = 10
content_cache_ttl_secs = 300     # 5 minutes for testing
query_cache_ttl_secs = 60        # 1 minute for testing
chunk_size = 512
chunk_overlap = 50
user_agent = "RAGTestAgent/1.0 (Testing)"
respect_robots_txt = false        # Disabled for testing
web_content_collection = "test_web_content"
web_query_cache_collection = "test_web_query_cache"
content_cache_prefix = "test_web_content:"
query_cache_prefix = "test_web_query:"
endpoint = "http://localhost:8888"
timeout_secs = 10
max_results = 5
preferred_engines = ["duckduckgo", "google", "github", "stackoverflow"]



[[agent_network.agents]]
id = "coding-1"
agent_type = "Coding"
model = "mistral-nemo:12b"  # Down from 32b → 90% smaller
temperature = 0.1
max_tokens = 4096
system_prompt = """You are an expert coding assistant.
You write clean, idiomatic code following best practices.
Always consider error handling and type safety."""
# Available tools this agent CAN use (pool)
available_tools = [
    "read_file",
    "write_file",
    "list_files",
    "search_code",
    "run_tests"
]
required_tools = ["read_file", "write_file"]

[[agent_network.agents]]
id = "planning-1"
agent_type = "Planning"
model = "qwen2.5:3b"
temperature = 0.4
max_tokens = 2048
system_prompt = """You are a planning agent that decomposes complex tasks.
Break down tasks into logical steps with clear dependencies."""
# No tools for planning agent
available_tools = []
required_tools = []

# [[agent_network.agents]]
# id = "writing-1"
# agent_type = "Writing"
# model = "phi3.5:3.8b"  # Alternative: Microsoft's efficient model
# temperature = 0.7
# max_tokens = 2048
# system_prompt = """You are a technical writing assistant.
# Generate clear documentation and commit messages."""

[[agent_network.agents]]
id = "evaluator-1"
agent_type = "Evaluator"
model = "qwen2.5:3b"
temperature = 0.3
max_tokens = 1024
system_prompt = """You are a code reviewer and quality evaluator.
Assess outputs for correctness, quality, and best practices."""
# Read-only tools for evaluation
available_tools = ["read_file", "lsp"]
required_tools = ["read_file"] # Must have this

[agent_network.hitl]
enabled = true
default_mode = "Async"
sample_rate = 0.1  # Review 10% of tasks

[agent_network.retry]
max_attempts = 3
backoff_ms = 1000
backoff_multiplier = 2.0

[agent_network.token_budget]
max_tokens_per_agent = 8192
enable_context_pruning = true
enable_prompt_caching = true

[agent_network.acp]
host = "0.0.0.0"
port = 9999

[agent_network.quality]

[agent_network.tracing]
enabled = true
jaeger_endpoint = "http://localhost:14268/api/traces"
